<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VISUM</title>
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page">
      <div class="sticky-eyebrow">
        <span class="sticky-title">
          <span class="sticky-word">VISUM</span>
          <span class="sticky-subtitle"> · OBSERVATIONS IN NUMBER</span>
        </span>
        <div class="header-actions">
          <button id="menu-toggle" class="ghost icon-button header-menu-toggle header-action" type="button" aria-label="Open menu">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="square" fill="none"></path>
            </svg>
          </button>
          <div class="header-actions-list" id="header-actions-list">
            <button id="play-toggle" class="primary header-action" type="button">PLAY</button>
            <button id="reverse-toggle" class="ghost header-action" type="button">REVERSE</button>
            <button id="step-back" class="ghost header-action step-button" type="button">STEP <span class="step-symbol">-</span></button>
            <button id="step-forward" class="ghost header-action step-button" type="button">STEP <span class="step-symbol">+</span></button>
            <button id="reset-params" class="ghost header-action" type="button">RESET</button>
            <button id="toggle-controls" class="ghost header-action" type="button">HIDE CONTROLS</button>
            <button id="toggle-theme" class="ghost icon-button header-action" type="button" aria-label="Toggle theme">
              <svg class="icon icon-sun" viewBox="0 0 24 24" aria-hidden="true">
                <circle cx="12" cy="12" r="4" fill="currentColor"></circle>
                <path d="M12 2v3M12 19v3M4.93 4.93l2.12 2.12M16.95 16.95l2.12 2.12M2 12h3M19 12h3M4.93 19.07l2.12-2.12M16.95 7.05l2.12-2.12" stroke="currentColor" stroke-width="1.6" fill="none" stroke-linecap="square"></path>
              </svg>
              <svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M21 14.5A8.5 8.5 0 1 1 9.5 3a7 7 0 1 0 11.5 11.5Z" fill="currentColor"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
      <header class="header">
        <div>
          <h1>TIMES-TABLE CIRCLES</h1>
          <p class="subtitle">
            A living plate of modular multiplication. Adjust the parameters to see the natural patterns and symmetries in numbers.
          </p>
          <a class="jump-link" href="#notes">READ MORE</a>
        </div>
      </header>

      <main class="layout">
        <section class="canvas-panel">
          <canvas id="visum-canvas"></canvas>
          <div id="live-readout" class="live-readout"></div>
        </section>

        <aside class="controls">
          <div class="controls-header">
            <span>CONTROLS</span>
          </div>
          <details class="control-group" open>
            <summary>GEOMETRY</summary>
            <div class="control-content">
              <label>
                <span>POINTS (N)</span>
                <input id="points" type="number" min="2" max="4000" step="1" value="200" />
              </label>
              <label>
                <span>MULTIPLIER (k)</span>
                <input id="multiplier" type="number" step="0.01" value="2" />
              </label>
              <label>
                <span>ROTATION (deg)</span>
                <input id="rotation" type="number" step="1" value="0" />
              </label>
              <label>
                <span>START INDEX</span>
                <input id="start-index" type="number" step="1" value="0" />
              </label>
              <div class="inline">
                <label>
                  <span>LINE COUNT</span>
                  <input id="line-count" type="number" min="0" step="1" value="200" />
                </label>
                <label class="toggle">
                  <input id="line-count-all" type="checkbox" checked />
                  <span>ALL LINES</span>
                </label>
              </div>
            </div>
          </details>

          <details class="control-group" open>
            <summary>MULTIPLIER ANIMATION</summary>
            <div class="control-content">
              <label class="toggle">
                <input id="mult-anim-enable" type="checkbox" checked />
                <span>ENABLE</span>
              </label>
              <label>
                <span>START</span>
                <input id="mult-anim-start" type="number" step="0.01" value="2" />
              </label>
              <label>
                <span>END</span>
                <input id="mult-anim-end" type="number" step="0.01" value="200" />
              </label>
              <label>
                <span>SPEED (k/sec)</span>
                <input id="mult-anim-speed" type="number" step="0.01" value="0.25" />
              </label>
              <div class="inline">
                <label class="toggle">
                  <input id="mult-anim-loop" type="checkbox" />
                  <span>LOOP</span>
                </label>
                <label class="toggle">
                  <input id="mult-anim-pingpong" type="checkbox" checked />
                  <span>PING-PONG</span>
                </label>
              </div>
            </div>
          </details>

          <details class="control-group" open>
            <summary>APPEARANCE</summary>
            <div class="control-content">
              <label>
                <span>LINE WIDTH</span>
                <input id="line-width" type="number" step="0.2" value="1" />
              </label>
              <label>
                <span>POINT RADIUS</span>
                <input id="point-radius" type="number" step="0.2" value="1.9" />
              </label>
              <div class="inline">
                <label class="toggle">
                  <input id="show-circle" type="checkbox" checked />
                  <span>SHOW CIRCLE</span>
                </label>
                <label class="toggle">
                  <input id="show-points" type="checkbox" checked />
                  <span>SHOW POINTS</span>
                </label>
                <label class="toggle">
                  <input id="show-labels" type="checkbox" />
                  <span>SHOW LABELS</span>
                </label>
              </div>
              <label>
                <span>LABEL STEP</span>
                <input id="label-step" type="number" min="1" step="1" value="10" />
              </label>
              <div class="swatches">
                <label>
                  <span>BACKGROUND</span>
                  <input id="bg-color" type="color" value="#fffdfb" />
                </label>
                <label>
                  <span>LINES</span>
                  <input id="line-color" type="color" value="#2d2a26" />
                </label>
                <label>
                  <span>CIRCLE</span>
                  <input id="circle-color" type="color" value="#8b3c2e" />
                </label>
                <label>
                  <span>POINTS</span>
                  <input id="point-color" type="color" value="#c9866e" />
                </label>
                <label>
                  <span>LABELS</span>
                  <input id="label-color" type="color" value="#3f3a34" />
                </label>
              </div>
            </div>
          </details>

          <details class="control-group" open>
            <summary>STEP CONTROL</summary>
            <div class="control-content">
              <label>
                <span>TARGET</span>
                <select id="step-target">
                  <option value="lines">LINES</option>
                  <option value="multiplier">MULTIPLIER</option>
                  <option value="points">POINTS</option>
                </select>
              </label>
              <label>
                <span>STEP AMOUNT</span>
                <input id="step-amount" type="number" step="0.1" value="1" />
              </label>
            </div>
          </details>

          <details class="control-group" open>
            <summary>LINE ANIMATION</summary>
            <div class="control-content">
              <label class="toggle">
                <input id="line-anim-enable" type="checkbox" />
                <span>ENABLE</span>
              </label>
              <label>
                <span>START</span>
                <input id="line-anim-start" type="number" step="1" value="0" />
              </label>
              <label>
                <span>END</span>
                <input id="line-anim-end" type="number" step="1" value="200" />
              </label>
              <label>
                <span>SPEED (lines/sec)</span>
                <input id="line-anim-speed" type="number" step="1" value="60" />
              </label>
              <div class="inline">
                <label class="toggle">
                  <input id="line-anim-loop" type="checkbox" checked />
                  <span>LOOP</span>
                </label>
                <label class="toggle">
                  <input id="line-anim-pingpong" type="checkbox" />
                  <span>PING-PONG</span>
                </label>
              </div>
            </div>
          </details>

          <details class="control-group" open>
            <summary>POINTS ANIMATION</summary>
            <div class="control-content">
              <label class="toggle">
                <input id="points-anim-enable" type="checkbox" />
                <span>ENABLE</span>
              </label>
              <label>
                <span>START</span>
                <input id="points-anim-start" type="number" step="1" value="100" />
              </label>
              <label>
                <span>END</span>
                <input id="points-anim-end" type="number" step="1" value="400" />
              </label>
              <label>
                <span>SPEED (points/sec)</span>
                <input id="points-anim-speed" type="number" step="1" value="20" />
              </label>
              <div class="inline">
                <label class="toggle">
                  <input id="points-anim-loop" type="checkbox" />
                  <span>LOOP</span>
                </label>
                <label class="toggle">
                  <input id="points-anim-pingpong" type="checkbox" checked />
                  <span>PING-PONG</span>
                </label>
              </div>
            </div>
          </details>
        </aside>
      </main>

      <section class="field-notes" id="notes">
        <div class="notes-heading">
          <p class="eyebrow">NOTES</p>
          <h2>WHY THE SYMMETRIES APPEAR</h2>
        </div>
        <div class="notes-grid">
          <div>
            <p class="dropcap">
              Place <strong>N</strong> points on a circle and connect each point <em>n</em> to
              <em>k · n (mod N)</em>. That “mod” is modular arithmetic: we wrap around once we
              reach N, so every connection lands on a numbered point. When <em>k</em> is an
              integer, the mapping repeats with a period tied to the multiplicative order of
              <em>k</em> modulo <em>N</em>, which is why you see repeating petals and starburst
              symmetries.
            </p>
            <p>
              The famous cardioid appears when we draw the family of chords joining each
              point to its double. The envelope of those chords is a cardioid, and other
              multipliers trace related curves such as nephroids.
            </p>
          </div>
          <div>
            <p>
              Symmetry comes from repetition: when the mapping cycles through a subset of
              indices, you get repeating chords and rotational patterns. When the multiplier
              and point count share factors, the drawing splits into interlaced sub-figures.
            </p>
            <ul>
              <li><a href="https://divisbyzero.com/2018/04/02/i-heart-cardioids/">Cardioids from times-table chords</a></li>
              <li><a href="https://www.redblobgames.com/x/1847-mathologer-modulo-circle/">Interactive modular circle explainer</a></li>
              <li><a href="https://en.wikipedia.org/wiki/Modular_arithmetic">Modular arithmetic overview</a></li>
              <li><a href="https://en.wikipedia.org/wiki/Cardioid">Cardioid geometry and envelope definition</a></li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <script src="wasm_exec.js"></script>
    <script src="app.js"></script>
  </body>
</html>
